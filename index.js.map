{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nexport const loadMore = document.querySelector('.load-more-btn');\n\nfunction imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  const alt = tags.split(',').slice(0, 3).join(', ');\n  return `<li>\n          <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${alt}\" width=\"360\" height=\"152\" />\n          <div class=\"thumb\">\n          <h2>Likes<span class=\"item-text\">${likes}</span></h2>\n          <h2>Views<span class=\"item-text\">${views}</span></h2>\n          <h2>Comments<span class=\"item-text\">${comments}</span></h2>\n          <h2>Downloads<span class=\"item-text\">${downloads}</span></h2>\n          </div>\n          </a>\n        </li>`;\n}\nfunction imagesTemplate(imgs) {\n  return imgs.map(imageTemplate).join('\\n');\n}\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  captions: true,\n});\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\nexport function createGallery(images) {\n  const markup = imagesTemplate(images);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\nexport function showLoadMore() {\n  loadMore.classList.remove('hidden');\n}\nexport function hideLoadMore() {\n  loadMore.classList.add('hidden');\n}\nexport function updateBtnStatus(currentPage, maxPage) {\n  if (currentPage < maxPage) {\n    showLoadMore();\n    return;\n  } else {\n    hideLoadMore();\n    iziToast.info({\n      message: `We're sorry, but you've reached the end of search results.`,\n    });\n  }\n}\n","import axios from 'axios';\n\nconst API_KEY = '50463047-2395de4a1fa17e590ab2adb36';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n  const res = await axios.get(`${BASE_URL}?${params}`);\n  return res.data;\n}\n","import {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  hideLoadMore,\n  updateBtnStatus,\n  loadMore,\n} from './js/render-functions';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet query = null;\nlet currentPage = 1;\nlet maxPage = 1;\n\nconst form = document.querySelector('.form');\nhideLoader();\nhideLoadMore();\nform.addEventListener('submit', onSubmit);\nloadMore.addEventListener('click', onClick);\n\nasync function onSubmit(e) {\n  e.preventDefault();\n\n  query = e.target.elements['search-text'].value.trim();\n  currentPage = 1;\n  clearGallery();\n  showLoader();\n  try {\n    if (query === '') {\n      hideLoader();\n      iziToast.warning({\n        message: 'Search field cannot be empty.',\n        position: 'topRight',\n      });\n      hideLoadMore();\n      form.reset();\n      return;\n    }\n\n    const res = await getImagesByQuery(query, currentPage);\n    maxPage = Math.ceil(res.totalHits / 15);\n    if (!res.hits || res.hits.length === 0) {\n      hideLoader();\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n      });\n\n      hideLoadMore();\n      form.reset();\n      return;\n    }\n\n    createGallery(res.hits);\n    hideLoader();\n    updateBtnStatus(currentPage, maxPage);\n    form.reset();\n  } catch (err) {\n    hideLoader();\n    iziToast.error({\n      message: 'Something went wrong!!!',\n      position: 'topRight',\n    });\n  }\n}\nasync function onClick() {\n  hideLoadMore();\n  try {\n    currentPage++;\n    showLoader();\n\n    const res = await getImagesByQuery(query, currentPage);\n    createGallery(res.hits);\n    hideLoader();\n    window.scrollBy({\n      top: document.querySelector('li').getBoundingClientRect().height * 3,\n      behavior: 'smooth',\n    });\n    updateBtnStatus(currentPage, maxPage);\n  } catch (err) {\n    hideLoader();\n    iziToast.error({\n      message: 'Something went wrong!!!',\n      position: 'topRight',\n    });\n  }\n}\n"],"names":["loader","gallery","loadMore","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","alt","imagesTemplate","imgs","lightbox","SimpleLightbox","clearGallery","createGallery","images","markup","showLoader","hideLoader","showLoadMore","hideLoadMore","updateBtnStatus","currentPage","maxPage","iziToast","API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","form","onSubmit","onClick","e","res"],"mappings":"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"}